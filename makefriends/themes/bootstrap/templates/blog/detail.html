{% extends "base.html" %}
{% load static %}

{% block title %}
    <title>{{ post.title }} | AugustRush923</title>
{% endblock %}

{% block content %}
    <section>
        <div class="container">
            <div class="row">
                <div class="col-md-9">
                    <div class="blog-main">
                        <div class="heading-blog">
                            {{ post.title }}
                        </div>
                        发布：{{ post.created_time | date:"Y年m月d日" }} |
                        作者：{{ post.owner }} |
                        阅读量: {{ post.pv }}
                        <div class="blog-txt">
                            {% autoescape off %}
                                {% load emoji_tags %}
                                {{ post.toc | safe }}
                                {#                                {{ post.content_markdown | safe }}#}
                                {{ post.content_markdown | emoji_replace }}
                                {#                                {{ post.content_markdown | emoji_replace_unicode }}#}
                                {#                                {{ post.content_markdown  | emoji_replace_html_entities }}#}
                            {% endautoescape %}
                        </div>
                        <div class="blog-more">
                            {% if pre_post and next_post %}
                                <span>上一篇:<a href="{% url 'post-detail' pre_post.id %}">{{ pre_post }}</a></span>
                                <span id="right">下一篇:<a href="{% url 'post-detail' next_post.id %}">{{ next_post }}</a></span>
                            {% elif next_post %}
                                <span>下一篇:<a href="{% url 'post-detail' next_post.id %}">{{ next_post }}</a></span>
                            {% elif pre_post %}
                                <span>上一篇:<a href="{% url 'post-detail' pre_post.id %}">{{ pre_post }}</a></span>
                            {% endif %}
                        </div>
                    </div>
                        <form action="{% url 'post_comment' post.pk %}" method="post" class="comment-form">
                            {% csrf_token %}
                            <div class="row">
                                <div class="col-md-4">
                                    <label for="{{ form.name.id_for_label }}">名字：</label>
                                    {{ form.name }}
                                    {{ form.name.errors }}
                                </div>
                                <div class="col-md-4">
                                    <label for="{{ form.email.id_for_label }}">邮箱：</label>
                                    {{ form.email }}
                                    {{ form.email.errors }}
                                </div>
                                <div class="col-md-4">
                                    <label for="{{ form.url.id_for_label }}">URL：</label>
                                    {{ form.url }}
                                    {{ form.url.errors }}
                                </div>
                                <div class="col-md-12">
                                    <label for="{{ form.text.id_for_label }}">评论：</label>
                                    {{ form.text }}
                                    {{ form.text.errors }}
                                    <button type="submit" class="comment-btn">发表</button>
                                </div>
                            </div>    <!-- row -->
                        </form>
                        <ul class="comment-list list-unstyled">
                            {% for comment in comment_list %}
                                <li class="comment-item">
                                    <span class="nickname">{{ comment.nickname }}</span>
                                    <time class="submit-date">{{ comment.created_time }}</time>
                                    <div class="text">
                                        {{ comment.content }}
                                    </div>
                                </li>
                            {% empty %}
                                暂无评论
                            {% endfor %}
                        </ul>
                    {#                    <div id="disqus_thread"></div>#}

                    {#                    <script>#}
                    {#                        /**#}
                    {#                         *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.#}
                    {#                         *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */#}
                    {#                        /*#}
                    {#                        var disqus_config = function () {#}
                    {#                        this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable#}
                    {#                        this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable#}
                    {#                        };#}
                    {#                        */#}
                    {#                        (function () { // DON'T EDIT BELOW THIS LINE#}
                    {#                            var d = document, s = d.createElement('script');#}
                    {#                            s.src = 'https://makefriend.disqus.com/embed.js';#}
                    {#                            s.setAttribute('data-timestamp', +new Date());#}
                    {#                            (d.head || d.body).appendChild(s);#}
                    {#                        })();#}
                    {#                    </script>#}
                    {#                    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments#}
                    {#                        powered by Disqus.</a></noscript>#}
                </div>
                {{ block.super }}
            </div>
        </div>
    </section>
{% endblock %}
